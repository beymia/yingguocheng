(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-customerService-customerService"],{"008b":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 英国城自定义 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/*通用字体属性*/\r\n/*margin或者padding值*/\r\n/*默认整体的背景色*/\r\n/*默认的局部主题色*/uni-page-body[data-v-4ad8de34]{min-height:100%;background:#f5f5f5}uni-image[data-v-4ad8de34]{width:%?70?%;height:%?70?%;-webkit-border-radius:50%;border-radius:50%}.customer_service[data-v-4ad8de34]{width:100%;min-height:100%;background:#f5f5f5;padding-top:%?128?%;-webkit-box-sizing:border-box;box-sizing:border-box}.customer_service .head[data-v-4ad8de34]{width:100%;height:%?128?%;background:#fff;font-size:%?32?%;font-weight:700;color:#333;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;position:fixed;top:0;z-index:10}.customer_service .head .head_title[data-v-4ad8de34]{margin-left:%?14?%}.customer_service .head .head_title uni-text[data-v-4ad8de34]{display:block}.customer_service .head .head_title uni-text[data-v-4ad8de34]:nth-child(2){font-size:%?22?%;font-weight:400;color:#999}.customer_service .tip[data-v-4ad8de34]{width:100%;height:%?170?%;font-size:%?22?%;color:#999;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.customer_service .tip uni-text[data-v-4ad8de34]:nth-child(2){margin-top:%?30?%}.customer_service .left[data-v-4ad8de34],\r\n.customer_service .right[data-v-4ad8de34]{width:100%;font-size:%?24?%;color:#333;margin-bottom:%?10?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;padding:0 %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.customer_service .left .content[data-v-4ad8de34],\r\n.customer_service .right .content[data-v-4ad8de34]{height:%?80?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.customer_service .left .content uni-text[data-v-4ad8de34],\r\n.customer_service .right .content uni-text[data-v-4ad8de34]{width:auto;height:%?60?%;background:#17a1ff;line-height:%?60?%;color:#fff;padding:0 %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:%?10?%;border-radius:%?10?%;margin-left:%?30?%}.customer_service .right[data-v-4ad8de34]{-webkit-box-align:end;-webkit-align-items:flex-end;align-items:flex-end}.customer_service .right .content uni-text[data-v-4ad8de34]{margin-left:0;margin-right:%?30?%}.customer_service .user_input[data-v-4ad8de34]{width:%?740?%;height:%?100?%;position:fixed;bottom:0;left:0;padding-left:%?24?%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background-color:#fff}.customer_service .user_input uni-input[data-v-4ad8de34]{width:%?548?%;height:%?80?%;-webkit-border-radius:%?10?%;border-radius:%?10?%;background-color:#fff;padding:0 %?10?%;-webkit-box-sizing:border-box;box-sizing:border-box}.customer_service .user_input uni-button[data-v-4ad8de34]{width:%?140?%;height:%?80?%;background-color:#17a1ff;border:none;font-size:%?24?%;color:#fff;line-height:%?80?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.customer_service .empty[data-v-4ad8de34]{width:100%;height:%?200?%}',""]),e.exports=t},"0ccb":function(e,t,r){var n=r("50c4"),i=r("1148"),a=r("1d80"),o=Math.ceil,s=function(e){return function(t,r,s){var c,d,u=String(a(t)),l=u.length,f=void 0===s?" ":String(s),v=n(r);return v<=l||""==f?u:(c=v-l,d=i.call(f,o(c/f.length)),d.length>c&&(d=d.slice(0,c)),e?u+d:d+u)}};e.exports={start:s(!1),end:s(!0)}},"2c31":function(e,t,r){function n(e,t){var r,n=t.data,a=void 0===n?{}:n,o=t.method,s=void 0===o?"POST":o,c=t.isToken,d=void 0===c||c,u={};return d&&(u["token"]=getApp().globalData.userToken),u["Content-Type"]="application/x-www-form-urlencoded",r="/api",new Promise((function(t,n){uni.request({url:r+e,data:a,method:s,header:u,success:function(e){200===e.statusCode&&1001!==e.data.code?t(e.data):i(d,e,n)},fail:function(e){console.log("请求出错",e.data),n(e)}})}))}function i(e,t,r){var n=uni.getStorageSync("token");console.log(n),n&&e&&"Token Error"===t.data.msg?(uni.hideLoading(),uni.showModal({title:"登陆状态失效!\n请重新登陆",success:function(e){e.confirm?uni.navigateTo({url:"/pages/login/login"}):r(t)}})):r(t)}r("d3b7"),e.exports=n},"377c":function(e,t,r){"use strict";var n=r("4ea4");r("4d90"),r("498a"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var i=n(r("1da1")),a=r("95b9"),o={data:function(){return{initTime:0,chatList:[],chatId:"",userMsg:"",chatStart:!1}},mounted:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var r,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=uni.getStorageSync("chat"),r&&(e.chatList=r),t.next=5,(0,a.initChat)();case 5:e.chatId=t.sent.data.room_id,n=new Date,i=(n.getHours()+"").padStart(2,"0"),o=(n.getMinutes()+"").padStart(2,"0"),e.initTime=i+":"+o,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),e.customToast("出現了錯誤",!1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},methods:{sendMessage:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userMsg.trim()){t.next=2;break}return t.abrupt("return");case 2:return e.chatList.push({msg:e.userMsg,type:"user"}),t.prev=3,t.next=6,(0,a.sendMsg)({msg:e.userMsg,rid:e.chatId});case 6:e.userMsg="",e.chatStart=!0,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0),e.customToast("出現了錯誤",!1);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})))()},receiveMessage:function(){return(0,i.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,a.receiveMsg)();case 2:return t=e.sent.data.msg,e.abrupt("return",{msg:t,type:"server"});case 4:case"end":return e.stop()}}),e)})))()},toBack:function(){uni.navigateBack()}},onHide:function(){console.log(1),clearInterval(this.timer)},onUnload:function(){uni.setStorageSync("chat",this.chatList),clearInterval(this.timer)},watch:{chatStart:function(e){var t=this;e&&(this.timer=setInterval((0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t.chatList,e.next=3,t.receiveMessage();case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)}))),2e3))}}};t.default=o},"3ef8":function(e,t,r){"use strict";r.r(t);var n=r("377c"),i=r.n(n);for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a},"4d90":function(e,t,r){"use strict";var n=r("23e7"),i=r("0ccb").start,a=r("9a0c");n({target:"String",proto:!0,forced:a},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"570f":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return n}));var n={uniIcons:r("72bc").default},i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"customer_service"},[r("v-uni-view",{staticClass:"head"},[r("uni-icons",{staticStyle:{display:"inline-block","vertical-align":"middle"},attrs:{type:"arrowleft",size:"40",color:"#333333"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toBack.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"head_title"},[r("v-uni-text",[e._v("品立高餐飲")]),r("v-uni-text",[e._v("客服會話")])],1)],1),r("v-uni-view",{staticClass:"content"},[r("v-uni-view",{staticClass:"tip"},[r("v-uni-text",[e._v(e._s(e.initTime))]),r("v-uni-text",[e._v("品立高餐飲為您服務")])],1),r("v-uni-view",{staticClass:"detail"},e._l(e.chatList,(function(t,n){return r("v-uni-view",{key:n},[r("v-uni-view",{class:["server"===t.type?"left":"right"]},[r("v-uni-view",{staticClass:"left_item content"},["user"===t.type?r("v-uni-text",[e._v(e._s(t.msg))]):e._e(),r("v-uni-image",{attrs:{src:"user"===t.type?"../../static/images_t/my/user_avatar.png":"../../static/images_t/customerService/server.png"}}),"user"!==t.type?r("v-uni-text",[e._v(e._s(t.msg))]):e._e()],1)],1)],1)})),1)],1),r("v-uni-view",{staticClass:"user_input"},[r("v-uni-input",{attrs:{type:"text"},model:{value:e.userMsg,callback:function(t){e.userMsg=t},expression:"userMsg"}}),r("v-uni-button",{attrs:{plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendMessage.apply(void 0,arguments)}}},[e._v("發送")])],1),r("v-uni-view",{staticClass:"empty"})],1)},a=[]},"69ed":function(e,t,r){var n=r("008b");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=r("4f06").default;i("18d7a2b6",n,!0,{sourceMap:!1,shadowMode:!1})},"95b9":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.giveForesee=t.mutualRecord=t.buyForesee=t.myForesee=t.foreseeList=t.receiveMsg=t.sendMsg=t.initChat=t.usedCoupon=t.paymentStart=t.createOrder=t.paymentAttach=t.memberRechargeInfo=t.msgCenter=t.rechargeRecord=t.receiveKnight=t.interestsPark=t.receivePack=t.monthPack=t.receiveLevel=t.levelPack=t.recharge=t.qrCode=t.expensesRecord=t.setPwd=t.discount=t.joinMember=t.userSpace=t.redeemGifts=t.pointsGoodsDetail=t.exchangeRecord=t.pointsDetails=t.convert=t.login=t.verifyCode=t.sendCheckCode=t.invoice=t.orderForm=t.tolk=void 0;var n=r("2c31"),i=function(e){return n("/config/talk",{data:e,isToken:!1})};t.tolk=i;var a=function(e){return n("/user/order",{data:e})};t.orderForm=a;var o=function(e){return n("/invoice-apply/create-apply",{data:e})};t.invoice=o;var s=function(e){return n("/sms/login-sms",{data:e,isToken:!1})};t.sendCheckCode=s;var c=function(e){return n("/sms/verify-sms",{data:e,isToken:!1})};t.verifyCode=c;var d=function(e){return n("/login/login",{data:e,isToken:!1})};t.login=d;var u=function(e){return n("/convert/list",{data:e})};t.convert=u;var l=function(e){return n("/record/integral-notes",{data:e})};t.pointsDetails=l;var f=function(e){return n("/integral/convert-record",{data:e})};t.exchangeRecord=f;var v=function(e){return n("/convert/detail",{data:e})};t.pointsGoodsDetail=v;var g=function(e){return n("/convert/convert",{data:e})};t.redeemGifts=g;var p=function(e){return n("/user/user-info",{data:e})};t.userSpace=p;var b=function(e){return n("/pay/service",{data:e})};t.joinMember=b;var h=function(e){return n("/ticket/tickets",{data:e})};t.discount=h;var m=function(e){return n("/user/setpwd",{data:e})};t.setPwd=m;var k=function(e){return n("/record/balance-notes",{data:e})};t.expensesRecord=k;var w=function(e){return n("/qr-code/user-code",{data:e})};t.qrCode=w;var x=function(e){return n("/pay/recharge",{data:e})};t.recharge=x;var y=function(e){return n("/grade/park-list",{data:e})};t.levelPack=y;var _=function(e){return n("/grade/receive-park",{data:e})};t.receiveLevel=_;var M=function(e){return n("/month/park-list",{data:e})};t.monthPack=M;var C=function(e){return n("/month/receive-park",{data:e})};t.receivePack=C;var S=function(e){return n("/interests/park-list",{data:e})};t.interestsPark=S;var R=function(e){return n("/interests/receive-park",{data:e})};t.receiveKnight=R;var z=function(e){return n("/record/service-notes",{data:e})};t.rechargeRecord=z;var T=function(e){return n("/msg-center/list",{data:e})};t.msgCenter=T;var L=function(e){return n("/config/recharge-level",{data:e})};t.memberRechargeInfo=L;var P=function(e){return n("/config/attach",{data:e,isToken:!1})};t.paymentAttach=P;var j=function(e){return n("/order/create-order",{data:e})};t.createOrder=j;var F=function(e){return n("/pay/pay",{data:e})};t.paymentStart=F;var I=function(e){return n("/ticket/suit-tickets",{data:e})};t.usedCoupon=I;var D=function(e){return n("/dialog/init-dialog",{data:e})};t.initChat=D;var O=function(e){return n("/dialog/send-msg",{data:e})};t.sendMsg=O;var A=function(e){return n("/dialog/latest-dialog",{data:e})};t.receiveMsg=A;var q=function(e){return n("/foreseeList-card/list",{data:e})};t.foreseeList=q;var B=function(e){return n("/foreseeList-card/my-card",{data:e})};t.myForesee=B;var E=function(e){return n("/foreseeList-card/pay-card",{data:e})};t.buyForesee=E;var G=function(e){return n("/foreseeList-card/my-gift",{data:e})};t.mutualRecord=G;var $=function(e){return n("/foresee-card/handsel-gift",{data:e})};t.giveForesee=$},"9a0c":function(e,t,r){var n=r("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},d85a:function(e,t,r){"use strict";r.r(t);var n=r("570f"),i=r("3ef8");for(var a in i)"default"!==a&&function(e){r.d(t,e,(function(){return i[e]}))}(a);r("f693");var o,s=r("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"4ad8de34",null,!1,n["a"],o);t["default"]=c.exports},f693:function(e,t,r){"use strict";var n=r("69ed"),i=r.n(n);i.a}}]);