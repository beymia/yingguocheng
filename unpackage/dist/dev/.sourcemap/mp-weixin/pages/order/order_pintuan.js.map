{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/yingguocheng/pages/order/order_pintuan.vue?d1ba","webpack:///C:/Users/Administrator/Desktop/yingguocheng/pages/order/order_pintuan.vue?6a52","webpack:///C:/Users/Administrator/Desktop/yingguocheng/pages/order/order_pintuan.vue?f129","webpack:///C:/Users/Administrator/Desktop/yingguocheng/pages/order/order_pintuan.vue?ae24","uni-app:///pages/order/order_pintuan.vue","webpack:///C:/Users/Administrator/Desktop/yingguocheng/pages/order/order_pintuan.vue?f66f"],"names":["createPage","Page","renderjs","component","options","__file","components","uniNavBar","uniIcons","render","_vm","this","_h","$createElement","l1","_self","_c","is_notice","__map","menu_list","menu","menu_index","$orig","__get_orig","l0","goods_list","good","good_index","m0","is_rest","productCartNum","id","_isMounted","e0","$event","showSearch","e1","e2","e3","e4","showPintuan","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":"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0FACA,mCAGA,aAhLA,YAgLA,eAEA,cACA,iBAEA,oEACA,aACA,+BAGA,uBA1LA,SA0LA,GACA,YACA,0BAEA,gBA9LA,SA8LA,GACA,mCACA,uCACA,uCACA,+CAEA,eAIA,KACA,iCAIA,wBAEA,YACA,cACA,+BACA,mBAEA,gBACA,kBAEA,oCACA,iBAaA,oBArOA,SAqOA,GACA,MAEA,EADA,iCACA,sDAEA,0FAEA,uBACA,wBACA,uBAGA,uBAjPA,SAiPA,GACA,wBACA,gCAEA,wBArPA,WAsPA,yBACA,cAEA,UAzPA,WA0PA,cAEA,eA5PA,SA4PA,GACA,qBACA,eACA,WACA,yDAEA,0DAGA,eArQA,SAqQA,GACA,qBACA,+BACA,eACA,eACA,WACA,mGAEA,oGAGA,oBAhRA,SAgRA,4HACA,iBACA,MACA,sBACA,cACA,oDAGA,sBACA,cACA,gCAVA,8CAeA,IA/RA,SA+RA,uIACA,oBACA,eACA,4BACA,wBACA,eACA,EANA,uBAOA,aACA,sBACA,oBACA,UACA,cACA,2BAEA,YAdA,iCAoBA,sBACA,kBArBA,UAsBA,kBAtBA,WAuBA,UAvBA,wBAyBA,SACA,GACA,GACA,KACA,0EACA,SACA,gBACA,oCACA,qBAEA,aAnCA,UAuCA,sBACA,eAxCA,WAyCA,sEAzCA,8DA4CA,kBA5CA,QA8CA,gBACA,UA/CA,QAoDA,gBApDA,8DAwDA,UAvVA,WAuVA,+HACA,IACA,IAFA,SAiBA,2BACA,eACA,QADA,SACA,GACA,MAEA,KAJA,SAIA,GACA,WAGA,uBA1BA,cAiBA,EAjBA,OA2BA,aACA,cAEA,0CA9BA,kBA+BA,0BA/BA,8CAiCA,UAxXA,SAwXA,qJACA,6DADA,cACA,EADA,OACA,KAGA,sBACA,2DACA,EAEA,KAIA,KACA,qIAGA,2CAHA,oGAbA,SAkBA,iCACA,QACA,uBACA,mBACA,UAtBA,OA0BA,eACA,mBACA,kCA5BA,+CAgCA,eAxZA,WAwZA,oJACA,4CADA,cACA,EADA,OACA,KAEA,eACA,KAEA,KACA,uBACA,SACA,UACA,kCACA,4BACA,gBACA,yBACA,6BACA,SACA,UACA,oBACA,uBACA,eACA,6BACA,gCACA,wCACA,4BACA,0BACA,qBACA,+CAGA,aAEA,eA/BA,UAgCA,iCACA,eACA,QACA,uBACA,kCACA,SACA,KACA,4CACA,sBAGA,0CACA,SACA,oBACA,YACA,6BACA,SACA,UACA,wBACA,eACA,kCACA,oBAEA,6BACA,eACA,UACA,kBAEA,WACA,cACA,UAIA,kBAlEA,QAqEA,cArEA,kD;;;;2DCvvBA,q2BAAipC,eAAG,G","file":"pages/order/order_pintuan.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order/order_pintuan.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order_pintuan.vue?vue&type=template&id=509e6928&scoped=true&\"\nvar renderjs\nimport script from \"./order_pintuan.vue?vue&type=script&lang=js&\"\nexport * from \"./order_pintuan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order_pintuan.vue?vue&type=style&index=0&id=509e6928&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"509e6928\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/order_pintuan.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order_pintuan.vue?vue&type=template&id=509e6928&scoped=true&\"","var components = {\n  uniNavBar: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-nav-bar/uni-nav-bar\" */ \"@/components/uni-nav-bar/uni-nav-bar.vue\"\n    )\n  },\n  uniIcons: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 = !_vm.is_notice\n    ? _vm.__map(_vm.menu_list, function(menu, menu_index) {\n        var $orig = _vm.__get_orig(menu)\n\n        var l0 = _vm.__map(menu.goods_list, function(good, good_index) {\n          var $orig = _vm.__get_orig(good)\n\n          var m0 = !_vm.is_rest ? _vm.productCartNum(good.id) : null\n          return {\n            $orig: $orig,\n            m0: m0\n          }\n        })\n\n        return {\n          $orig: $orig,\n          l0: l0\n        }\n      })\n    : null\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showSearch = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.is_notice = false\n    }\n\n    _vm.e2 = function($event) {\n      _vm.is_notice = true\n    }\n\n    _vm.e3 = function($event) {\n      _vm.showSearch = false\n    }\n\n    _vm.e4 = function($event) {\n      _vm.showPintuan = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order_pintuan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order_pintuan.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"page\">\r\n\t\t<!-- 自定义导航栏start -->\r\n\t\t\t<uni-nav-bar :title=\"title\" statusBar style=\"\">\r\n\t\t\t<template slot=\"left\">\r\n\t\t\t\t<view style=\"height: 35px;line-height: 35px;border-radius: 18px;border: 1px solid #eaeaea;margin-left: 24rpx;padding: 0 15px;display: flex;align-self: center;\">\r\n\t\t\t\t\t<uni-icons type=\"arrowleft\" size=\"34\" color=\"#333333\" @tap='left_tap'></uni-icons>\r\n\t\t\t\t\t<text style=\"width: 29px;font-size: 17px;text-align: center;color: #EAEAEA;\">|</text>\r\n\t\t\t\t\t<icon type=\"search\" size=\"17\" color=\"#666666\" style=\"display: flex;align-items: center;\" @tap=\"showSearch=true\"></icon>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</uni-nav-bar>\r\n\t\t<!-- 自定义导航栏end -->\r\n\t\t\r\n\t\t<!-- 头部start -->\r\n\t\t<view class=\"order_head\">\r\n\t\t\t<!-- 位置、自取、外卖、堂食start -->\r\n\t\t\t\r\n\t\t\t<view class=\"location\">\r\n\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t<view class=\"top\" @tap=\"loca_tap\">\r\n\t\t\t\t\t\t<view class=\"loca_icon\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/images/order/location.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"shop_adress\">{{shop_address}}</view>\r\n\t\t\t\t\t\t<!-- <uni-icons type=\"arrowright\" size=\"35\" color=\"#333333\"></uni-icons> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom\">\r\n\t\t\t\t\t\t<view class=\"shop_tab_icon\" @tap=\"switch_shop\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/images/order/shop_tap.jpg\" mode=\"\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"shop_name\" >\r\n\t\t\t\t\t\t\t{{pintuanShop.shop_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- <view class=\"tip_text\">\r\n\t\t\t\t\t\t\t{{choosedShop.tip}}\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pintuan_type\">\r\n\t\t\t\t\t{{pintuanType == 1 ? \"外賣\":\"自取\"}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 位置、自取、外卖、堂食end -->\r\n\t\t\t\r\n\t\t\t<!-- 公告栏start -->\r\n\t\t\t<view class=\"notice\">\r\n\t\t\t\t<swiper   class=\"swiper_wrap_notice\"  :autoplay=\"true\" vertical circular :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t<swiper-item v-if=\"!is_notice\" v-for=\"(notice,notice_index) in notice_list1\" :key=\"notice_index\">\r\n\t\t\t\t\t\t<view class=\"swiper-item notice_title\">\r\n\t\t\t\t\t\t\t<view class=\"notice_icon\">\r\n\t\t\t\t\t\t\t\t<image src=\"/static/images/order/blueBall.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"notice_text\">{{notice}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t\t<!-- <view class=\"nnnnnnnnnnnnnn\">\r\n\t\t\t\t\t<view class=\"mmmmmmmmmm\" v-for=\"(item,index) in notice_list1\">\r\n\t\t\t\t\t\t{{item}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view> -->\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t<template v-if=\"is_notice\">\r\n\t\t\t\t\t\t<view class=\"notice_more\" @tap=\"is_notice=false\">\r\n\t\t\t\t\t\t\t<text class=\"notice_more\">收起</text>\r\n\t\t\t\t\t\t\t<uni-icons type=\"arrowup\" size=\"24\" color=\"#999999\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<view class=\"notice_more\" @tap=\"is_notice=true\">\r\n\t\t\t\t\t\t\t<text class=\"notice_more\">更多</text>\r\n\t\t\t\t\t\t\t<uni-icons type=\"arrowdown\" size=\"24\" color=\"#999999\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t\r\n\t\t\t</view>\r\n\t\t\t<!-- 公告栏end -->\r\n\t\t</view>\r\n\t\t<!-- 头部end-->\r\n\t\t<!-- 新聞詳情頁開始 -->\r\n\t\t<notice v-if=\"is_notice\" style=\"flex: 1;display: flex;\" :choosed_shop=\"pintuanShop\"></notice>\r\n\t\t<!-- 新聞詳情頁結束 -->\r\n\t\t<!-- 点单主体部分start -->\r\n\t\t<view class=\"main\" v-if=\"!is_notice\">\r\n\t\t\t<!-- 左侧菜单栏start -->\r\n\t\t\t<scroll-view class=\"menu_bar\" scroll-y=\"true\" >\r\n\t\t\t\t<view class=\"menu_item\" v-for=\"(menu,menu_index) in menu_list\"  :class=\"{active:menu.id==menu_id_current}\" @click=\"menu_Tap(menu.id)\" >\r\n\t\t\t\t\t<image class=\"menu_icon\" :src=\"menu.icon_url\" mode=\"\"></image>\r\n\t\t\t\t\t<text class=\"menu_name\">{{menu.menu_name}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- 左侧菜单栏end -->\r\n\t\t\t<!-- 右侧商品栏start -->\r\n\t\t\t<scroll-view scroll-y=\"true\" scroll-with-animation :scroll-top=\"goods_scrollTop\"  class=\"goods\" @scroll=\"goods_scroll\" >\r\n\t\t\t\t<view class=\"pdb50\">\r\n\t\t\t\t\t<view class=\"goods_list\" :id=\"`goods_${menu.id}`\" v-for=\"(menu,menu_index) in menu_list\">\r\n\t\t\t\t\t\t<view class=\"goods_title\">\r\n\t\t\t\t\t\t\t{{menu.menu_name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"goods_item\" v-for=\"(good,good_index) in menu.goods_list\" @tap=\"showProductDetailModal(good)\">\r\n\t\t\t\t\t\t\t<view class=\"good_icon\">\r\n\t\t\t\t\t\t\t\t<image :src=\"good.imgurl\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"good_intro\">\r\n\t\t\t\t\t\t\t\t<view class=\"good_name\">\r\n\t\t\t\t\t\t\t\t\t{{good.name}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"good_label\">\r\n\t\t\t\t\t\t\t\t\t<!-- <view class=\"isHot\" v-if=\"good.isHot\">\r\n\t\t\t\t\t\t\t\t\t\t可做热饮\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"recipe\">\r\n\t\t\t\t\t\t\t\t\t\t{{good.recipe}}\r\n\t\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"isHot\" v-for=\"label in good.labels\">\r\n\t\t\t\t\t\t\t\t\t\t{{label}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"good_des\">\r\n\t\t\t\t\t\t\t\t\t{{good.description}}\r\n\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t\t<rich-text class=\"good_des\" :nodes=\"good.description\"></rich-text>\r\n\t\t\t\t\t\t\t\t<view class=\"price\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t￥{{good.price}}\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<actions v-if=\"!is_rest\"\r\n\t\t\t\t\t\t\t\t\t\t\t:materials-btn=\"!!(good.materials && good.materials.length)\"\r\n\t\t\t\t\t\t\t\t\t\t\t@materials=\"showProductDetailModal(good)\" \r\n\t\t\t\t\t\t\t\t\t\t\t:number=\"productCartNum(good.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t@add=\"handleAddToCart(good)\" \r\n\t\t\t\t\t\t\t\t\t\t\t@minus=\"handleMinusFromCart(good)\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t</scroll-view>\r\n\t\t\t<!-- 右侧商品栏end -->\r\n\t\t</view>\r\n\t\t<!-- 点单主体部分end -->\r\n\t\t<!-- 商品詳情頁開始 -->\r\n\t\t<product-modal  v-if=\"!is_rest\"\r\n\t\t\t\t\t\t:product=\"good\"\r\n\t\t\t\t\t\t:visible=\"goodModalVisible\" \r\n\t\t\t\t\t\t@cancel=\"closeProductDetailModal\" \r\n\t\t\t\t\t\t@add-to-cart=\"handleAddToCartInModal\" \r\n\t\t/>\r\n\t\t<!-- 商品詳情頁結束 -->\r\n\t\t<!-- 购物车栏 begin -->\r\n\t\t<cart-bar v-if=\"!is_notice && !is_rest\" :cart=\"cart\" :choosedShop=\"pintuanShop\"\r\n\t\t\t\t  @add=\"handleAddToCart\" \r\n\t\t\t\t  @minus=\"handleMinusFromCart\"\r\n\t\t\t\t  @clear=\"clearCart\"\r\n\t\t\t\t  @checkboxChange=\"checkboxChange\"\r\n\t\t\t\t  @checkAllChange=\"checkAllChange\"\r\n\t\t\t\t  @pay=\"pay\"\r\n\t\t/>\r\n\t\t<!-- 购物车栏 end -->\r\n\t\t<!-- 休息中 start -->\r\n\t\t<rest :is_rest=\"is_rest\" :opening_hours=\"opening_hours\"></rest>\r\n\t\t<!-- 休息中 end -->\r\n\t\t<!-- 搜索页面start -->\r\n\t\t<search v-if=\"showSearch\" :show=\"showSearch\" :categories=\"menu_list\" @hide=\"showSearch=false\" @choose=\"showProductDetailModal\" ></search>\r\n\t\t<!-- 搜索页面end -->\r\n\t\t<!-- 拼团 -->\r\n\t\t<pintuan :show=\"showPintuan\" @closePintuan=\"showPintuan = false\" @choose_type=\"choose_pintuan_type\"></pintuan>\r\n\t\t<!-- 拼团end -->\r\n\t\t<!-- 微信位置授權start -->\r\n\t\t<locaAutho :show=\"showLocaAutho\" @openSetting=\"openSetting\"></locaAutho>\r\n\t\t<!-- 微信位置授權end -->\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState, mapMutations} from 'vuex'\r\n\t// import {menu_list} from './data.js';\r\n\timport actions from './components/actions/actions.vue'\r\n\timport notice from './components/notice/notice.vue'\r\n\timport cartBar from './components/cartbar/cartbar-pintuan.vue'\r\n\timport productModal from './components/product-modal/product-modal.vue'\r\n\timport search from './components/search/search.vue'\r\n\timport rest from './components/rest/rest.vue'\r\n\timport pintuan from './components/pintuan/pintuan.vue'\r\n\timport locaAutho from './components/locaAutho/locaAutho.vue'\r\n\timport {shops_list,shops_detail,goods_list,goods_detail,pintuan_creat,pintuan_detail,pintuan_order} from '@/request/api_y.js'\r\n\timport {during} from '@/util/Date.js'\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t\tactions,\r\n\t\t\tnotice,\r\n\t\t\tproductModal,\r\n\t\t\tcartBar,\r\n\t\t\tsearch,\r\n\t\t\trest,\r\n\t\t\tpintuan,\r\n\t\t\tlocaAutho,\r\n\t\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmenu_list:[],\r\n\t\t\t\t//下面都是静态默认值\r\n\t\t\t\ttitle:'英国城',\r\n\t\t\t\tis_notice:false,\r\n\t\t\t\tmenu_id_current:1,\r\n\t\t\t\tgoods_scrollTop:0,\r\n\t\t\t\tgood:{},\r\n\t\t\t\tgoodModalVisible:false,\r\n\t\t\t\tcart:[],\r\n\t\t\t\tshowSearch:false,\r\n\t\t\t\tlocalAdress:{},\r\n\t\t\t\tis_rest:false,\r\n\t\t\t\tshowPintuan:false,\r\n\t\t\t\tshowLocaAutho:false,\r\n\t\t\t\tshop_change_time:0\r\n\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t/* choosedShop:{\r\n\t\t\t\tasync handler(newval){\r\n\t\t\t\t\tif(this.shop_change_time == 0){\r\n\t\t\t\t\t\tthis.shop_change_time =1\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(this.shop_change_time)\r\n\t\t\t\t\tconsole.log(66666666666666666666666)\r\n\t\t\t\t\tconsole.log(newval)\r\n\t\t\t\t\t// //this.judge_is_rest()//判斷是否在休息\r\n\t\t\t\t\t// await this.shop_init(this.loca_res)//获取门店列表和设置当前门店\r\n\t\t\t\t\tawait this.menu_list_init()//获取并设置当前门店下全部商品信息\r\n\t\t\t\t\tthis.$nextTick(() => this.calcSize())\r\n\t\t\t\t\tconsole.log('bbbbbbbbbbbbbbbbbbbbbbbb')\r\n\t\t\t\t},\r\n\t\t\t\tdeep:true\r\n\t\t\t} */\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\t\r\n\t\t\tuni.showLoading({\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tawait this.judge_is_rest()//判斷是否在休息\r\n\t\t\tlet t = 0\r\n\t\t\tif(!this.is_rest){\r\n\t\t\t\tawait this.menu_list_init()//获取并设置当前门店下全部商品信息\r\n\t\t\t\tthis.cart = this.pintuanCart[0]\r\n\t\t\t\tconsole.log(777777777777)\r\n\t\t\t\tconsole.log(this.cart)\r\n\t\t\t\tconsole.log(this.menu_list)\r\n\t\t\t\tthis.cart.forEach((item,index)=>{\r\n\t\t\t\t\tlet t1=0\r\n\t\t\t\t\t this.menu_list.forEach(iteml=>{\r\n\t\t\t\t\t\tif(iteml.goods_list){\r\n\t\t\t\t\t\t\tlet i=iteml.goods_list.findIndex(itemg=>{\r\n\t\t\t\t\t\t\t\t\treturn itemg.id == item.id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif(i!=-1){\r\n\t\t\t\t\t\t\t\tt1=1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(t1!=1){\r\n\t\t\t\t\t\tt = 1\r\n\t\t\t\t\t\tconsole.log('this.cart[index]')\r\n\t\t\t\t\t\tconsole.log(this.cart[index])\r\n\t\t\t\t\t\tthis.cart.splice(index,1)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(t){\r\n\t\t\t\tthis.SET_PINTUAN_CART(this.cart)\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent:'當前購物車中包含已失效商品，已自動刪除！',\r\n\t\t\t\t\tshowCancel:false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t //await this.init()\r\n\t\t\t  console.log(\"order onLoad\")\r\n\t\t\tthis.$nextTick(() => this.calcSize())\r\n\t\t\tuni.hideLoading()\r\n\t\t},\r\n\r\n\t\t onReady() {\r\n\t\t\t // console.log(this.choosedShop)\r\n\t\t\t console.log(\"order onReady\")\r\n\t\t},\r\n\t\t onShow() {\r\n\t\t\t\r\n\t\t\r\n\t\t},\r\n\t\tonHide() {\r\n\r\n\t\t},\r\n\t\t\r\n\t\tcomputed:{\r\n\t\t\t...mapState(['orderType','pintuanType','choosedShop','choosedAddress','orderFrom','shopList','pintuanShop','pintuanCode',,'pintuanCart']),\r\n\t\t\tcontact_number(){\r\n\t\t\t\t// console.log(this.choosedAddress)\r\n\t\t\t\tif(this.choosedAddress.contact_number ){\r\n\t\t\t\t\tif(this.choosedAddress.contact_number.length<=9){\r\n\t\t\t\t\t\treturn this.choosedAddress.contact_number\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn this.choosedAddress.contact_number.substr(0,8)+\"...\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshop_address(){\r\n\t\t\t\tif(this.pintuanShop.shop_address){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.pintuanShop.shop_address.length<=9){\r\n\t\t\t\t\t\treturn this.pintuanShop.shop_address\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn this.pintuanShop.shop_address.substr(0,8)+\"...\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnotice_list1(){\r\n\t\t\t\tif(this.pintuanShop){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.pintuanShop.detail){\r\n\t\t\t\t\t\tconsole.log('cccccccccccccccccccccccccccc')\r\n\t\t\t\t\t\tlet r = this.pintuanShop.detail.scroll_ad\r\n\t\t\t\t\t\tconsole.log(r)\r\n\t\t\t\t\t\treturn r\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tproductCartNum(id) {\t//计算单个饮品添加到购物车的数量\r\n\t\t\t\treturn id => this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\t\tif(cur.id === id) {\r\n\t\t\t\t\t\t\treturn acc += cur.number\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn acc\r\n\t\t\t\t\t}, 0)\r\n\t\t\t},\r\n\t\t\topening_hours(){\r\n\t\t\t\treturn this.pintuanShop.work_time + ' - ' +this.pintuanShop.rest_time\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations(['SET_ORDER_TYPE','SET_PINTUAN_TYPE','SET_CHOOSED_SHOP','SET_CHOOSED_ADDRESS','SET_ORDER_FROM','SET_SHOP_LIST','SET_PINTUAN_SHOP','SET_PINTUAN_CODE',,'SET_PINTUAN_CART']),\r\n\t\t\tcalcSize() {\r\n\t\t\t\tlet h = 0\r\n\t\t\t\t\r\n\t\t\t\tthis.menu_list.forEach(item => {\r\n\t\t\t\t\tlet view = uni.createSelectorQuery().select(`#goods_${item.id}`)\r\n\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\titem.top = h\r\n\t\t\t\t\t\th += data.height\r\n\t\t\t\t\t\titem.ht = h\r\n\t\t\t\t\t}).exec()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscan(){\r\n\t\t\t\talert('scan')\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tscanType:'qrCode',\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\talert('scan sucess')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tleft_tap(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync openSetting(){\r\n\t\t\t\t//this.showLocaAutho = false\r\n\t\t\t\t    // 获取位置信息\r\n\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t  success: async(dataAu)=> {\r\n\t\t\t\t\t    if (dataAu.authSetting[\"scope.userLocation\"] == true) {\r\n\t\t\t\t\t     this.showLocaAutho = false\r\n\t\t\t\t\t\t let loca_res = await this.long_lati()//获取当前定位经纬度\r\n\t\t\t\t\t\t this.judge_is_rest()//判斷是否在休息\r\n\t\t\t\t\t\t await this.shop_init(loca_res)//获取门店列表和设置当前门店\r\n\t\t\t\t\t\t await this.menu_list_init()//获取并设置当前门店下全部商品信息\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t this.$nextTick(() => this.calcSize())\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t    } else {\r\n\t\t\t\t\t      uni.showToast({\r\n\t\t\t\t\t        title: '授权失败',\r\n\t\t\t\t\t        icon: 'none',\r\n\t\t\t\t\t        duration: 1000\r\n\t\t\t\t\t      })\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t})\r\n\t\t\t\t    \r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync judge_is_rest(){\r\n\t\t\t\tlet work_status = (await shops_detail({shop_id:this.pintuanShop.id})).data.work_status\r\n\t\t\t\tif(work_status !=1){\r\n\t\t\t\t\tthis.is_rest = true\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:'本店已休息，您可以選擇切換門店',\r\n\t\t\t\t\t\tcancelText:\"留在當前\",\r\n\t\t\t\t\t\tconfirmText:\"切換門店\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl:'/pages/chooseShop/chooseShop'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t/* let isin = during(this.choosedShop.work_time,this.choosedShop.rest_time)\r\n\t\t\t\tif(!isin){\r\n\t\t\t\t\tthis.is_rest = true\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:'本店已休息，您可以選擇切換門店',\r\n\t\t\t\t\t\tcancelText:\"留在當前\",\r\n\t\t\t\t\t\tconfirmText:\"切換門店\",\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl:'/pages/chooseShop/chooseShop'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} */\r\n\t\t\t},\r\n\t\t\thandle_from(){\r\n\t\t\t\tswitch(this.orderFrom){\r\n\t\t\t\t\tcase 'home_tssx':\r\n\t\t\t\t\t\tlet menu = this.menu_list.find(item => item.menu_name == '特色手信')\r\n\t\t\t\t\t\tthis.menu_id_current=menu.id;\r\n\t\t\t\t\t\tthis.goods_scrollTop = menu.top+Math.random();\r\n\t\t\t\t\t\tthis.SET_ORDER_FROM('');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync pin_tap(){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\tcontent:'網頁版暫不支持此功能，請使用微信小程序版或手機app版！',\r\n\t\t\t\t})\r\n\t\t\t\t//return\r\n\t\t\t\t// #endif\r\n\t\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\t\tconsole.log(token)\r\n\t\t\t\tif(token){\r\n\t\t\t\t\tvar code = uni.getStorageSync('pintuanCode');\r\n\t\t\t\t\tif(code){\r\n\t\t\t\t\t\tvar a = await pintuan_detail({code:code})\r\n\t\t\t\t\t\tif(a.code == 1000){\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl:'/pages/pintuan/pintuan?pintuanCode='+code\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.showPintuan =true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.showPintuan =true\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t    content: '您還沒有登錄，請先登錄',\r\n\t\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl:'/pages/login/login'\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tloca_tap(){\r\n\t\t\t\tif(this.orderType == 1){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/userAdress/userAdress\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/chooseShop/chooseShop\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tswitch_shop(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/chooseShop/chooseShop\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\torder_type_tap(type){\r\n\t\t\t\tif(type == 1){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/userAdress/userAdress\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.SET_ORDER_TYPE(type)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tmenu_Tap(id){\r\n\t\t\t\tthis.showLoca = !this.showLoca\r\n\t\t\t\tthis.menu_id_current=id;\r\n\t\t\t\tthis.goods_scrollTop = this.menu_list.find(item => item.id == id).top+Math.random();\r\n\t\t\t\tconsole.log(this.goods_scrollTop)\r\n\t\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgoods_scroll({detail}) {\r\n\t\t\t\t//this.goods_scrollTop=detail.scrollTop;//仅仅起到监听作用，防止重复设值不生效\r\n\t\t\t\tlet {scrollTop} =detail;\r\n\t\t\t\tscrollTop=Math.ceil(scrollTop)+1;\r\n\t\t\t\t\r\n\t\t\t\tlet tabs = this.menu_list.filter(item=>item.top<=scrollTop&&item.ht>scrollTop)\r\n\t\t\t\tif(tabs.length>0){\r\n\t\t\t\t\tthis.menu_id_current=tabs[0].id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowProductDetailModal(good) {\r\n\t\t\t\tthis.good = good\r\n\t\t\t\tthis.goodModalVisible = true\r\n\t\t\t},\r\n\t\t\thandleAddToCart(good) {\t//添加到购物车\r\n\t\t\tconsole.log(this.productCartNum());\r\n\t\t\t\tconst index = this.cart.findIndex(item => {\r\n\t\t\t\t\tif(good.materials && good.materials.length) {\r\n\t\t\t\t\t\treturn (item.id == good.id) && (item.materials_text == good.materials_text)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn item.id === good.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif(index > -1) {\r\n\t\t\t\t\tthis.cart[index].number += (good.number || 1)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.cart.push({id: good.id,\r\n\t\t\t\t\t//cate_id: good.category_id,\r\n\t\t\t\t\tname: good.name,\r\n\t\t\t\t\tprice: good.price,\r\n\t\t\t\t\ttruePrice:good.truePrice|| good.price,\r\n\t\t\t\t\tnumber: good.number || 1,\r\n\t\t\t\t\t//image: good.images[0].url,\r\n\t\t\t\t\timgurl:good.imgurl,\r\n\t\t\t\t\tnorm_id:good.norm_id,\r\n\t\t\t\t\t// is_single: good.is_single,\r\n\t\t\t\t\tmaterials_text: good.materials_text || '',\r\n\t\t\t\t\tis_checked:true,\r\n\t\t\t\t});\r\n\t\t\t\t// this.cart.push({\r\n\t\t\t\t// \tid: good.id,\r\n\t\t\t\t// \tcate_id: good.category_id,\r\n\t\t\t\t// \tname: good.name,\r\n\t\t\t\t// \tprice: good.price,\r\n\t\t\t\t// \tnumber: good.number || 1,\r\n\t\t\t\t// \timage: good.images[0].url,\r\n\t\t\t\t// \tis_single: good.is_single,\r\n\t\t\t\t// \tmaterials_text: good.materials_text || ''\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\thandleMinusFromCart(good) { //从购物车减商品\r\n\t\t\t\tlet index\r\n\t\t\t\tif(good.materials && !good.materials.length) {\r\n\t\t\t\t   index = this.cart.findIndex(item => item.id == good.id)\r\n\t\t\t\t} else {\r\n\t\t\t\t   index = this.cart.findIndex(item => (item.id == good.id) && (item.materials_text == good.materials_text))\r\n\t\t\t\t}\r\n\t\t\t\tthis.cart[index].number -= 1\r\n\t\t\t\tif(this.cart[index].number <= 0) {\r\n\t\t\t\t\tthis.cart.splice(index, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleAddToCartInModal(good) {\r\n\t\t\t\tthis.handleAddToCart(good)\r\n\t\t\t\tthis.closeProductDetailModal()\r\n\t\t\t},\r\n\t\t\tcloseProductDetailModal() {\r\n\t\t\t\tthis.goodModalVisible = false\r\n\t\t\t\tthis.good = {}\r\n\t\t\t},\r\n\t\t\tclearCart() {\r\n\t\t\t\tthis.cart = []\r\n\t\t\t},\r\n\t\t\tcheckAllChange(e){\r\n\t\t\t\tvar values = e.detail.value;\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tif(values.length > 0){\r\n\t\t\t\t\tthis.cart.forEach(item => item.is_checked = true)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.cart.forEach(item => item.is_checked = false)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcheckboxChange(e){\r\n\t\t\t\tvar values = e.detail.value;\r\n\t\t\t\t\tvar good=e.currentTarget.dataset.good\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\tconsole.log(good)\r\n\t\t\t\t\tif(values.length > 0){\r\n\t\t\t\t\t\tthis.cart.find(item => item.id==good.id && item.materials_text == good.materials_text).is_checked=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.cart.find(item => item.id==good.id && item.materials_text == good.materials_text).is_checked= false;\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tasync choose_pintuan_type(type){\r\n\t\t\tthis.showPintuan=false;\r\n\t\t\tif(type==1 ){\r\n\t\t\t\tthis.SET_PINTUAN_TYPE(1)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/userAdress/userAdress?from=pintuan\"\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tthis.SET_PINTUAN_TYPE(2)\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/pintuan/pintuan\"\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tasync pay(price){\r\n\t\t\tconsole.log(111111)\r\n\t\t\tconsole.log(price)\r\n\t\t\tconst token = uni.getStorageSync('token');\r\n\t\t\tconsole.log(2222222222)\r\n\t\t\tconsole.log(token)\r\n\t\t\tif(!token){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    content: '您還沒有登錄，請先登錄',\r\n\t\t\t\t    success: function (res) {\r\n\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl:'/pages/login/login'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tconsole.log(33333333)\r\n\t\t\tuni.showLoading({})\r\n\t\t\tawait this.judge_is_rest()//\r\n\t\t\tif(!this.is_rest){\r\n\t\t\t\t\r\n\t\t\t\tvar app = getApp();\r\n\t\t\t\tvar order_info={};\r\n\t\t\t\tvar goods =[];\r\n\t\t\t\tvar goods_data = [];\r\n\t\t\t\tthis.cart.filter(item => item.is_checked==true).forEach(item =>{\r\n\t\t\t\t\tlet good ={};\r\n\t\t\t\t\tgood.goods_id = item.id;\r\n\t\t\t\t\tgood.goods_norm = item.norm_id ? item.norm_id : [];\r\n\t\t\t\t\tgood.goods_num = item.number\r\n\t\t\t\t\t\r\n\t\t\t\t\tgoods_data.push(good);\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\ttry{\r\n\t\t\t\t\tconsole.log(44444444)\r\n\t\t\t\t\tconsole.log(goods_data)\r\n\t\t\t\t\tawait pintuan_order({code:this.pintuanCode,goods_data: JSON.stringify(goods_data)})\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tuni.hideLoading()\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\tasync long_lati(){\r\n\t\t\tvar latitude = 0;\r\n\t\t\tvar longitude = 0\r\n\t\t\t// #ifdef H5\r\n\t\t\t\t\t\tlet res2 = await this.$jsonp('https://apis.map.qq.com/ws/location/v1/ip', {\r\n\t\t\t\t\t\t  key : 'MBTBZ-2PMKR-QARWA-W7MOH-AJ76K-6HB2J',\r\n\t\t\t\t\t\t  output:'jsonp',\r\n\t\t\t\t\t\t}).catch(e=>{})\r\n\t\t\t\t\t\t// console.log(res2)\r\n\t\t\t\t\t\tlatitude = res2.result.location.lat\r\n\t\t\t\t\t\tlongitude = res2.result.location.lng\r\n\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t//this.loca_autho\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tlet loca_res = await new Promise((resolve,reject)=>{\r\n\t\t\t\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(err){\r\n\t\t\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}).catch(e=>{})\r\n\t\t\t\t\t\tlatitude = loca_res.latitude\r\n\t\t\t\t\t\tlongitude = loca_res.longitude\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tconsole.log('latitude:'+latitude+'longitude:'+longitude)\r\n\t\t\t\t\t\treturn {latitude:latitude,longitude:longitude}\r\n\t\t},\r\n\t\tasync shop_init(loca_res){\r\n\t\t\tlet spl= (await shops_list({latitude:loca_res.latitude,longitude:loca_res.longitude})).data\r\n\t\t\t// console.log(spl)\r\n\t\t\t//this.SET_SHOP_LIST(spl)\r\n\t\t\tspl.sort(function(item1,item2){\r\n\t\t\t\tif(parseInt(item1.distance*100) <= parseInt(item2.distance*100) ){\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn 1\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// console.log(spl)\r\n\t\t\tlet spl_prom=[]\r\n\t\t\tspl.forEach( async (item,index) =>{\r\n\t\t\t\t// console.log(shop_detail2)\r\n\t\t\t\t//spl[index].detail = (await shops_detail({shop_id:item.id})).data \r\n\t\t\t\tspl_prom.push(shops_detail({shop_id:item.id}))\r\n\t\t\t})\r\n\t\t\tawait Promise.all(spl_prom).then(values=>{\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tspl.forEach(item=>{\r\n\t\t\t\t\titem.detail = values[index].data\r\n\t\t\t\t\tindex++\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\tconsole.log(spl)\r\n\t\t\tthis.SET_SHOP_LIST(spl)\r\n\t\t\tthis.SET_CHOOSED_SHOP(this.shopList[0])\r\n\t\t\t// console.log(this.choosedShop)\r\n\t\t\t //alert(this.choosedShop.id)\r\n\t\t},\r\n\t\tasync menu_list_init(){//获取并设置当前门店下全部商品信息\r\n\t\t\tlet menu_list1 = (await goods_list({shop_id:this.pintuanShop.id})).data\r\n\t\t\t// console.log(this.choosedShop)\r\n\t\t\tconsole.log(menu_list1)\r\n\t\t\tlet goods_promise = []\r\n\t\t\t// console.log(this.choosedShop) \r\n\t\t\tlet menu_list2=[]\r\n\t\t\tmenu_list1.forEach(item =>{\r\n\t\t\t\tlet obj = {};\r\n\t\t\t\tobj.id = item.id\r\n\t\t\t\tobj.icon_url = this.imgSrc + item.home_avatar\r\n\t\t\t\tobj.menu_name = item.classify_name\r\n\t\t\t\tobj.goods_list = []\r\n\t\t\t\tif(item.child && item.child.length){\r\n\t\t\t\t\titem.child.forEach(itemc =>{\r\n\t\t\t\t\t\tlet objc = {}\r\n\t\t\t\t\t\tobjc.id = itemc.id\r\n\t\t\t\t\t\tobjc.name = itemc.goods_name\r\n\t\t\t\t\t\tobjc.labels = itemc.goods_label\r\n\t\t\t\t\t\tobjc.materials =[]\r\n\t\t\t\t\t\tobjc.description = itemc.goods_detail\r\n\t\t\t\t\t\tobjc.imgurl = this.imgSrc + itemc.home_avatar\r\n\t\t\t\t\t\tobjc.price = parseInt(itemc.goods_price * 100)/100\r\n\t\t\t\t\t\tobjc.sell_status = itemc.sell_status\r\n\t\t\t\t\t\tobjc.goods_norm = itemc.goods_norm\r\n\t\t\t\t\t\tobj.goods_list.push(objc)\r\n\t\t\t\t\t\tgoods_promise.push(goods_detail({goods_id:itemc.id}))\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tmenu_list2.push(obj)\r\n\t\t\t})\r\n\t\t\tconsole.log(menu_list2)\r\n\t\t\tawait Promise.all(goods_promise).then( values =>{\r\n\t\t\t\t console.log(values)\r\n\t\t\t\tlet index = 0\r\n\t\t\t\tmenu_list2.forEach(item =>{\r\n\t\t\t\t\t\titem.goods_list.forEach(itemc =>{\r\n\t\t\t\t\t\t\tlet images =[]\r\n\t\t\t\t\t\t\tlet materials = []\r\n\t\t\t\t\t\t\tvalues[index].data.goods_avatar.forEach(itemv=>{\r\n\t\t\t\t\t\t\t\timages.push(this.imgSrc + itemv)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t// console.log(values[index].data.goods_norm)\r\n\t\t\t\t\t\t\tvalues[index].data.goods_norm.forEach(itemn=>{\r\n\t\t\t\t\t\t\t\tlet normobj ={}\r\n\t\t\t\t\t\t\t\tnormobj.group_name = itemn.name\r\n\t\t\t\t\t\t\t\tnormobj.values = []\r\n\t\t\t\t\t\t\t\titemn.child.forEach(itemvc=>{\r\n\t\t\t\t\t\t\t\t\tlet valobj ={}\r\n\t\t\t\t\t\t\t\t\tvalobj.id = itemvc.id\r\n\t\t\t\t\t\t\t\t\tvalobj.parent_id = itemvc.parent_id\r\n\t\t\t\t\t\t\t\t\tvalobj.name = itemvc.value\r\n\t\t\t\t\t\t\t\t\tvalobj.price = parseInt(itemvc.price * 100)/100\r\n\t\t\t\t\t\t\t\t\tnormobj.values.push(valobj)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tconsole.log(\"fffffffffffff\")\r\n\t\t\t\t\t\t\t\tconsole.log(normobj)\r\n\t\t\t\t\t\t\t\tmaterials.push(normobj)\r\n\t\t\t\t\t\t\t\tconsole.log(materials)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\titemc.images = images\r\n\t\t\t\t\t\t\titemc.materials = materials\r\n\t\t\t\t\t\t\tindex++\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(menu_list2)\r\n\t\t\t})\r\n\t\t\t// console.log('bojjijijj')\r\n\t\t\tthis.menu_list=menu_list2\r\n\t\t\t\r\n\t\t\t// console.log(this.choosedShop)\r\n\t\t\t// console.log(this.shopList)\r\n\t\t},\r\n\r\n\t},\r\n}\r\n\t\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import \"order.scss\";\r\n\t.pintuan_type{\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\tcolor: #333333;\r\n\t\t\tbackground: #f2f2f2;\r\n\t\t\tpadding: 6rpx 10rpx;\r\n\t}\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order_pintuan.vue?vue&type=style&index=0&id=509e6928&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order_pintuan.vue?vue&type=style&index=0&id=509e6928&lang=scss&scoped=true&\""],"sourceRoot":""}