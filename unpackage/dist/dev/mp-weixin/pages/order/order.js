(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{37:
/*!********************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/main.js?{"page":"pages%2Forder%2Forder"} ***!
  \********************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */7);o(n(/*! vue */2));var t=o(n(/*! ./pages/order/order.vue */38));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},38:
/*!*************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue ***!
  \*************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./order.vue?vue&type=template&id=127632e4&scoped=true& */39),r=n(/*! ./order.vue?vue&type=script&lang=js& */41);for(var s in r)"default"!==s&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n(/*! ./order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& */45);var c,a=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),i=Object(a["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"127632e4",null,!1,o["components"],c);i.options.__file="pages/order/order.vue",t["default"]=i.exports},39:
/*!********************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=template&id=127632e4&scoped=true& ***!
  \********************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=template&id=127632e4&scoped=true& */40);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},40:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=template&id=127632e4&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return c})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));var o={uniNavBar:function(){return n.e(/*! import() | components/uni-nav-bar/uni-nav-bar */"components/uni-nav-bar/uni-nav-bar").then(n.bind(null,/*! @/components/uni-nav-bar/uni-nav-bar.vue */340))},uniIcons:function(){return Promise.all(/*! import() | components/uni-icons/uni-icons */[n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,/*! @/components/uni-icons/uni-icons.vue */347))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.is_notice?null:e.__map(e.menu_list,(function(t,n){var o=e.__get_orig(t),r=e.__map(t.goods_list,(function(t,n){var o=e.__get_orig(t),r=e.is_rest?null:e.productCartNum(t.id);return{$orig:o,m0:r}}));return{$orig:o,l0:r}})));e._isMounted||(e.e0=function(t){e.showSearch=!0},e.e1=function(t){e.is_notice=!1},e.e2=function(t){e.is_notice=!0},e.e3=function(t){e.showSearch=!1},e.e4=function(t){e.showPintuan=!1}),e.$mp.data=Object.assign({},{$root:{l1:n}})},s=!1,c=[];r._withStripped=!0},41:
/*!**************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js& */42),r=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},42:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n(/*! ./node_modules/@babel/runtime/regenerator */4)),r=n(/*! vuex */15),s=n(/*! @/request/api_y.js */23);n(/*! @/util/Date.js */43),c(n(/*! @/util/permission.js */44));function c(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,o,r,s,c){try{var a=e[s](c),i=a.value}catch(u){return void n(u)}a.done?t(i):Promise.resolve(i).then(o,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var s=e.apply(t,n);function c(e){l(s,o,r,c,a,"next",e)}function a(e){l(s,o,r,c,a,"throw",e)}c(void 0)}))}}var h=function(){n.e(/*! require.ensure | pages/order/components/actions/actions */"pages/order/components/actions/actions").then(function(){return resolve(n(/*! ./components/actions/actions.vue */355))}.bind(null,n)).catch(n.oe)},f=function(){n.e(/*! require.ensure | pages/order/components/notice/notice */"pages/order/components/notice/notice").then(function(){return resolve(n(/*! ./components/notice/notice.vue */362))}.bind(null,n)).catch(n.oe)},p=function(){n.e(/*! require.ensure | pages/order/components/cartbar/cartbar */"pages/order/components/cartbar/cartbar").then(function(){return resolve(n(/*! ./components/cartbar/cartbar.vue */369))}.bind(null,n)).catch(n.oe)},_=function(){n.e(/*! require.ensure | pages/order/components/product-modal/product-modal */"pages/order/components/product-modal/product-modal").then(function(){return resolve(n(/*! ./components/product-modal/product-modal.vue */376))}.bind(null,n)).catch(n.oe)},g=function(){n.e(/*! require.ensure | pages/order/components/search/search */"pages/order/components/search/search").then(function(){return resolve(n(/*! ./components/search/search.vue */383))}.bind(null,n)).catch(n.oe)},m=function(){n.e(/*! require.ensure | pages/order/components/rest/rest */"pages/order/components/rest/rest").then(function(){return resolve(n(/*! ./components/rest/rest.vue */390))}.bind(null,n)).catch(n.oe)},v=function(){n.e(/*! require.ensure | pages/order/components/pintuan/pintuan */"pages/order/components/pintuan/pintuan").then(function(){return resolve(n(/*! ./components/pintuan/pintuan.vue */397))}.bind(null,n)).catch(n.oe)},b=function(){n.e(/*! require.ensure | pages/order/components/locaAutho/locaAutho */"pages/order/components/locaAutho/locaAutho").then(function(){return resolve(n(/*! ./components/locaAutho/locaAutho.vue */404))}.bind(null,n)).catch(n.oe)},S={components:{actions:h,notice:f,productModal:_,cartBar:p,search:g,rest:m,pintuan:v,locaAutho:b},data:function(){return{menu_list:[],title:"英国城",is_notice:!1,menu_id_current:1,goods_scrollTop:0,good:{},goodModalVisible:!1,cart:[],showSearch:!1,localAdress:{},is_rest:!1,showPintuan:!1,showLocaAutho:!1,shop_change_time:0}},watch:{choosedShop:{handler:function(e){var t=this;return d(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=t.shop_change_time){n.next=3;break}return t.shop_change_time=1,n.abrupt("return");case 3:return console.log(t.shop_change_time),console.log(6666666666666666e7),console.log(e),n.next=8,t.menu_list_init();case 8:t.$nextTick((function(){return t.calcSize()})),console.log("bbbbbbbbbbbbbbbbbbbbbbbb");case 10:case"end":return n.stop()}}),n)})))()},deep:!0}},onLoad:function(){var t=this;return d(o.default.mark((function n(){var r,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=!0,e.getSetting({success:function(e){console.log(e),void 0!=e.authSetting["scope.userLocation"]&&1!=e.authSetting["scope.userLocation"]?(t.showLocaAutho=!0,r=!1):e.authSetting["scope.userLocation"]}}),r){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,t.long_lati();case 6:return s=n.sent,t.loca_res=s,n.next=10,t.shop_init(t.loca_res);case 10:return t.judge_is_rest(),n.next=13,t.menu_list_init();case 13:console.log("order onLoad"),t.$nextTick((function(){return t.calcSize()}));case 15:case"end":return n.stop()}}),n)})))()},onReady:function(){console.log("order onReady")},onShow:function(){var t=this;e.getSetting({success:function(e){console.log(e),void 0!=e.authSetting["scope.userLocation"]&&1!=e.authSetting["scope.userLocation"]&&(t.showLocaAutho=!0)}}),console.log("order onShow"),this.handle_from(),console.log(this.choosedShop),console.log(this.shopList)},onHide:function(){console.log("order onhide"),console.log(this.choosedShop),console.log(this.shopList)},onShareAppMessage:function(e){},computed:i(i({},(0,r.mapState)(["orderType","pintuanType","choosedShop","choosedAddress","orderFrom","shopList"])),{},{contact_number:function(){if(this.choosedAddress.contact_number)return this.choosedAddress.contact_number.length<=9?this.choosedAddress.contact_number:this.choosedAddress.contact_number.substr(0,8)+"..."},shop_adress:function(){if(this.choosedShop.shop_address)return console.log(111111111111),console.log(this.choosedShop),console.log(this.choosedShop.detail),console.log(this.choosedShop),this.choosedShop.shop_address.length<=9?this.choosedShop.shop_address:this.choosedShop.shop_address.substr(0,8)+"..."},notice_list1:function(){if(this.choosedShop&&(console.log("999999999999999999999999"),console.log(this.choosedShop),this.choosedShop.detail)){console.log("cccccccccccccccccccccccccccc");var e=this.choosedShop.detail.scroll_ad;return console.log(e),e}},productCartNum:function(e){var t=this;return function(e){return t.cart.reduce((function(t,n){return n.id===e?t+n.number:t}),0)}},opening_hours:function(){return this.choosedShop.work_time+" - "+this.choosedShop.rest_time}}),methods:i(i({},(0,r.mapMutations)(["SET_ORDER_TYPE","SET_PINTUAN_TYPE","SET_CHOOSED_SHOP","SET_CHOOSED_ADDRESS","SET_ORDER_FROM","SET_SHOP_LIST"])),{},{calcSize:function(){var t=0;this.menu_list.forEach((function(n){var o=e.createSelectorQuery().select("#goods_".concat(n.id));o.fields({size:!0},(function(e){n.top=t,t+=e.height,n.ht=t})).exec()}))},scan:function(){alert("scan"),e.scanCode({scanType:"qrCode",success:function(t){var n=t.result.split(":");(n.length="invitecode"==n[0].trim().toLowerCase())?e.navigateTo({url:"/pages/pintuan/pintuan?invite=true&code="+n[1]}):e.showModal({showCancel:!1,content:"請掃描正確的邀請碼"})}})},openSetting:function(){var t=this;return d(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.openSetting({success:function(){var n=d(o.default.mark((function n(r){var s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!=r.authSetting["scope.userLocation"]){n.next=13;break}return t.showLocaAutho=!1,n.next=4,t.long_lati();case 4:return s=n.sent,t.judge_is_rest(),n.next=8,t.shop_init(s);case 8:return n.next=10,t.menu_list_init();case 10:t.$nextTick((function(){return t.calcSize()})),n.next=14;break;case 13:e.showToast({title:"授权失败",icon:"none",duration:1e3});case 14:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()});case 1:case"end":return n.stop()}}),n)})))()},judge_is_rest:function(){var t=this;return d(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.shops_detail)({shop_id:t.choosedShop.id});case 2:r=n.sent.data.work_status,1!=r&&(t.is_rest=!0,e.showModal({content:"本店已休息，您可以選擇切換門店",cancelText:"留在當前",confirmText:"切換門店",success:function(t){t.confirm?e.navigateTo({url:"/pages/chooseShop/chooseShop"}):t.cancel}}));case 4:case"end":return n.stop()}}),n)})))()},handle_from:function(){switch(this.orderFrom){case"home_tssx":var e=this.menu_list.find((function(e){return"特色手信"==e.menu_name}));this.menu_id_current=e.id,this.goods_scrollTop=e.top+Math.random(),this.SET_ORDER_FROM("");break}},pin_tap:function(){var t=this;return d(o.default.mark((function n(){var r,c,a,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getStorageSync("token"),console.log(r),!r){n.next=33;break}if(c=e.getStorageSync("pintuanCode"),!c){n.next=19;break}return n.prev=5,console.log("cccccccccccccc"),n.next=9,(0,s.pintuan_detail)({code:c});case 9:a=n.sent,console.log("aaaaaaaaaaaaaaaaa"),1001==a.code?(console.log("bbbbbbbbbbbbbbbb"),t.showPintuan=!0):e.navigateTo({url:"/pages/pintuan/pintuan?code="+c}),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](5),console.log(n.t0);case 17:n.next=31;break;case 19:return n.prev=19,n.next=22,(0,s.pintuan_creat)();case 22:i=n.sent,console.log("res_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pc"),console.log(i),1e3==i.code?(e.setStorage({key:"pintuanCode",data:i.data.code}),e.navigateTo({url:"/pages/pintuan/pintuan?code="+i.data.code})):t.showPintuan=!0,n.next=31;break;case 28:n.prev=28,n.t1=n["catch"](19),console.log(n.t1);case 31:n.next=34;break;case 33:e.showModal({content:"您還沒有登錄，請先登錄",success:function(t){t.confirm?e.navigateTo({url:"/pages/login/login?from=order"}):t.cancel}});case 34:case"end":return n.stop()}}),n,null,[[5,14],[19,28]])})))()},loca_tap:function(){1==this.orderType?e.navigateTo({url:"/pages/userAdress/userAdress"}):e.navigateTo({url:"/pages/chooseShop/chooseShop"})},switch_shop:function(){e.navigateTo({url:"/pages/chooseShop/chooseShop"})},order_type_tap:function(t){1==t?e.navigateTo({url:"/pages/userAdress/userAdress"}):this.SET_ORDER_TYPE(t)},menu_Tap:function(e){this.showLoca=!this.showLoca,this.menu_id_current=e,this.goods_scrollTop=this.menu_list.find((function(t){return t.id==e})).top+Math.random(),console.log(this.goods_scrollTop)},goods_scroll:function(e){var t=e.detail,n=t.scrollTop;n=Math.ceil(n)+1;var o=this.menu_list.filter((function(e){return e.top<=n&&e.ht>n}));o.length>0&&(this.menu_id_current=o[0].id)},showProductDetailModal:function(e){this.good=e,this.goodModalVisible=!0},handleAddToCart:function(e){console.log(this.productCartNum());var t=this.cart.findIndex((function(t){return e.materials&&e.materials.length?t.id==e.id&&t.materials_text==e.materials_text:t.id===e.id}));t>-1?this.cart[t].number+=e.number||1:this.cart.push({id:e.id,name:e.name,price:e.price,truePrice:e.truePrice||e.price,number:e.number||1,imgurl:e.imgurl,norm_id:e.norm_id,materials_text:e.materials_text||"",is_checked:!0})},handleMinusFromCart:function(e){var t;t=e.materials&&!e.materials.length?this.cart.findIndex((function(t){return t.id==e.id})):this.cart.findIndex((function(t){return t.id==e.id&&t.materials_text==e.materials_text})),this.cart[t].number-=1,this.cart[t].number<=0&&this.cart.splice(t,1)},handleAddToCartInModal:function(e){this.handleAddToCart(e),this.closeProductDetailModal()},closeProductDetailModal:function(){this.goodModalVisible=!1,this.good={}},clearCart:function(){this.cart=[]},checkAllChange:function(e){var t=e.detail.value;console.log(e),t.length>0?this.cart.forEach((function(e){return e.is_checked=!0})):this.cart.forEach((function(e){return e.is_checked=!1}))},checkboxChange:function(e){var t=e.detail.value,n=e.currentTarget.dataset.good;console.log(e),console.log(n),t.length>0?this.cart.find((function(e){return e.id==n.id&&e.materials_text==n.materials_text})).is_checked=!0:this.cart.find((function(e){return e.id==n.id&&e.materials_text==n.materials_text})).is_checked=!1},choose_pintuan_type:function(t){var n=this;return d(o.default.mark((function r(){return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:n.showPintuan=!1,1==t?(n.SET_PINTUAN_TYPE(1),e.navigateTo({url:"/pages/pintuan/pintuan"})):(n.SET_PINTUAN_TYPE(2),e.navigateTo({url:"/pages/pintuan/pintuan"}));case 2:case"end":return o.stop()}}),r)})))()},pay:function(t){var n=e.getStorageSync("token");if(console.log(n),n){if(this.judge_is_rest(),!this.is_rest){e.showLoading({});var o=getApp(),r={},s=[];if(this.cart.filter((function(e){return 1==e.is_checked})).forEach((function(e){var t={};t.id=e.id,t.goods_name=e.name,t.goods_price=e.truePrice,t.home_avatar=e.imgurl,t.norm=e.materials_text,t.norm_id=e.norm_id?e.norm_id:[],t.goods_num=e.number,s.push(t)})),0==s.length)return void e.showModal({content:"您還沒有選購商品",showCancel:!1});r.goods_data=s,r.shop_id=this.choosedShop.id,r.shop_name=this.choosedShop.shop_name,r.distance=this.choosedShop.distance,r.delivery_cost=parseInt(100*this.choosedShop.detail.delivery_cost)/100,r.lowest_cost=parseInt(100*this.choosedShop.detail.lowest_cost)/100,r.payment_info=t,r.address_id=this.choosedAddress.id,r.contact_name=this.choosedAddress.contact_name,r.contact_sex=this.choosedAddress.contact_sex,r.contact_phone=this.choosedAddress.contact_phone,r.contact_address=this.choosedAddress.contact_address,r.contact_number=this.choosedAddress.contact_number,r.haul_method=this.orderType,r.current_cups=this.choosedShop.detail.current_cups,r.current_order=this.choosedShop.detail.current_order,o.globalData.goodsPayment=r,console.log(r),e.hideLoading(),e.navigateTo({url:"/pages/orderPayment/orderPayment"})}}else e.showModal({content:"您還沒有登錄，請先登錄",success:function(t){t.confirm?e.navigateTo({url:"/pages/login/login?from=order"}):t.cancel}})},long_lati:function(){return d(o.default.mark((function t(){var n,r,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=0,r=0,t.next=4,new Promise((function(t,n){e.getLocation({success:function(e){t(e)},fail:function(e){return d(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})})).catch((function(e){}));case 4:return s=t.sent,n=s.latitude,r=s.longitude,console.log("latitude:"+n+"longitude:"+r),t.abrupt("return",{latitude:n,longitude:r});case 9:case"end":return t.stop()}}),t)})))()},shop_init:function(e){var t=this;return d(o.default.mark((function n(){var r,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.shops_list)({latitude:e.latitude,longitude:e.longitude});case 2:return r=n.sent.data,r.sort((function(e,t){return parseInt(100*e.distance)<=parseInt(100*t.distance)?-1:1})),c=[],r.forEach(function(){var e=d(o.default.mark((function e(t,n){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c.push((0,s.shops_detail)({shop_id:t.id}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.next=8,Promise.all(c).then((function(e){var t=0;r.forEach((function(n){n.detail=e[t].data,t++}))}));case 8:console.log(r),t.SET_SHOP_LIST(r),t.SET_CHOOSED_SHOP(t.shopList[0]);case 11:case"end":return n.stop()}}),n)})))()},menu_list_init:function(){var e=this;return d(o.default.mark((function t(){var n,r,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.goods_list)({shop_id:e.choosedShop.id});case 2:return n=t.sent.data,console.log(n),r=[],c=[],n.forEach((function(t){var n={};n.id=t.id,n.icon_url=e.imgSrc+t.home_avatar,n.menu_name=t.classify_name,n.goods_list=[],t.child&&t.child.length&&t.child.forEach((function(t){var o={};o.id=t.id,o.name=t.goods_name,o.labels=t.goods_label,o.materials=[],o.description=t.goods_detail,o.imgurl=e.imgSrc+t.home_avatar,o.price=parseInt(100*t.goods_price)/100,o.sell_status=t.sell_status,o.goods_norm=t.goods_norm,n.goods_list.push(o),r.push((0,s.goods_detail)({goods_id:t.id}))})),c.push(n)})),console.log(c),t.next=10,Promise.all(r).then((function(t){console.log(t);var n=0;c.forEach((function(o){o.goods_list.forEach((function(o){var r=[],s=[];t[n].data.goods_avatar.forEach((function(t){r.push(e.imgSrc+t)})),t[n].data.goods_norm.forEach((function(e){var t={};t.group_name=e.name,t.values=[],e.child.forEach((function(e){var n={};n.id=e.id,n.parent_id=e.parent_id,n.name=e.value,n.price=parseInt(100*e.price)/100,t.values.push(n)})),console.log("fffffffffffff"),console.log(t),s.push(t),console.log(s)})),o.images=r,o.materials=s,n++}))})),console.log(c)}));case 10:e.menu_list=c;case 11:case"end":return t.stop()}}),t)})))()},init:function(){var t=this;return d(o.default.mark((function n(){var r,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=0,c=0,e.getLocation({type:"gcj02",altitude:!0,success:function(){var e=d(o.default.mark((function e(n){var a,i,u,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.latitude,c=n.longitude,e.next=4,(0,s.shops_list)({latitude:r,longitude:c});case 4:return a=e.sent.data,console.log("latitude:"+r+"longitude:"+c),console.log(a),t.SET_SHOP_LIST(a),t.shopList.sort((function(e,t){return parseInt(100*e.distance)<=parseInt(100*t.distance)?-1:1})),console.log(a),t.shopList.forEach(function(){var e=d(o.default.mark((function e(t){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,s.shops_detail)({shop_id:t.id});case 2:n=e.sent.data,console.log(n),t.detail=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.SET_CHOOSED_SHOP(t.shopList[0]),console.log(t.choosedShop),e.next=15,(0,s.goods_list)({shop_id:t.choosedShop.id});case 15:return i=e.sent.data,console.log(t.choosedShop),console.log(i),u=[],console.log(t.choosedShop),l=[],i.forEach((function(e){var n={};if(n.id=e.id,n.icon_url=t.imgSrc+e.home_avatar,n.menu_name=e.classify_name,n.goods_list=[],e.child&&e.child.length){var o={};e.child.forEach((function(e){o.id=e.id,o.name=e.goods_name,o.labels=e.goods_label,o.materials=[],o.description=e.goods_detail,o.imgurl=t.imgSrc+e.home_avatar,o.price=e.goods_price,o.sell_status=e.sell_status,o.goods_norm=e.goods_norm,n.goods_list.push(o),u.push((0,s.goods_detail)({goods_id:e.id}))}))}l.push(n)})),console.log(l),e.next=25,Promise.all(u).then((function(e){console.log(e);var n=0;l.forEach((function(o){o.goods_list.forEach((function(o){var r=[],s=[];e[n].data.goods_avatar.forEach((function(e){r.push(t.imgSrc+e)})),console.log(e[n].data.goods_norm),e[n].data.goods_norm.forEach((function(e){var t={};t.group_name=e.name,t.values=[],e.child.forEach((function(e){var n={};n.id=e.id,n.parent_id=e.parent_id,n.name=e.value,n.price=e.price,t.values.push(n)})),console.log("fffffffffffff"),console.log(t),s.push(t),console.log(s)})),o.images=r,o.materials=s}))})),console.log(l)}));case 25:console.log("bojjijijj"),t.menu_list=l;case 27:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()});case 3:case"end":return n.stop()}}),n)})))()}})};t.default=S}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},45:
/*!***********************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& ***!
  \***********************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& */46),r=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},46:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[37,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/order.js.map