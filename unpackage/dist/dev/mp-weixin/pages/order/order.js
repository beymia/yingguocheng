(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{37:
/*!********************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/main.js?{"page":"pages%2Forder%2Forder"} ***!
  \********************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */7);o(n(/*! vue */2));var t=o(n(/*! ./pages/order/order.vue */38));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},38:
/*!*************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue ***!
  \*************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./order.vue?vue&type=template&id=127632e4&scoped=true& */39),r=n(/*! ./order.vue?vue&type=script&lang=js& */41);for(var c in r)"default"!==c&&function(e){n.d(t,e,(function(){return r[e]}))}(c);n(/*! ./order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& */46);var s,a=n(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */13),i=Object(a["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"127632e4",null,!1,o["components"],s);i.options.__file="pages/order/order.vue",t["default"]=i.exports},39:
/*!********************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=template&id=127632e4&scoped=true& ***!
  \********************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=template&id=127632e4&scoped=true& */40);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},40:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=template&id=127632e4&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return c})),n.d(t,"components",(function(){return o}));var o={uniNavBar:function(){return n.e(/*! import() | components/uni-nav-bar/uni-nav-bar */"components/uni-nav-bar/uni-nav-bar").then(n.bind(null,/*! @/components/uni-nav-bar/uni-nav-bar.vue */341))},uniIcons:function(){return Promise.all(/*! import() | components/uni-icons/uni-icons */[n.e("common/vendor"),n.e("components/uni-icons/uni-icons")]).then(n.bind(null,/*! @/components/uni-icons/uni-icons.vue */348))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.is_notice?null:e.__map(e.menu_list,(function(t,n){var o=e.__get_orig(t),r=e.__map(t.goods_list,(function(t,n){var o=e.__get_orig(t),r=e.is_rest?null:e.productCartNum(t.id);return{$orig:o,m0:r}}));return{$orig:o,l0:r}})));e._isMounted||(e.e0=function(t){e.showSearch=!0},e.e1=function(t){e.is_notice=!1},e.e2=function(t){e.is_notice=!0},e.e3=function(t){e.showSearch=!1},e.e4=function(t){e.showPintuan=!1}),e.$mp.data=Object.assign({},{$root:{l1:n}})},c=!1,s=[];r._withStripped=!0},41:
/*!**************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js& */42),r=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=r.a},42:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(/*! ./node_modules/@babel/runtime/regenerator */4)),r=n(/*! vuex */15),c=n(/*! @/request/api_y.js */23),s=(n(/*! @/util/Date.js */43),a(n(/*! @/util/permission.js */44)),a(n(/*! @/util/wxLogin.js */45)));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,o,r,c,s){try{var a=e[c](s),i=a.value}catch(u){return void n(u)}a.done?t(i):Promise.resolve(i).then(o,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var c=e.apply(t,n);function s(e){d(c,o,r,s,a,"next",e)}function a(e){d(c,o,r,s,a,"throw",e)}s(void 0)}))}}var f=function(){n.e(/*! require.ensure | pages/order/components/actions/actions */"pages/order/components/actions/actions").then(function(){return resolve(n(/*! ./components/actions/actions.vue */356))}.bind(null,n)).catch(n.oe)},p=function(){n.e(/*! require.ensure | pages/order/components/notice/notice */"pages/order/components/notice/notice").then(function(){return resolve(n(/*! ./components/notice/notice.vue */363))}.bind(null,n)).catch(n.oe)},_=function(){n.e(/*! require.ensure | pages/order/components/cartbar/cartbar */"pages/order/components/cartbar/cartbar").then(function(){return resolve(n(/*! ./components/cartbar/cartbar.vue */370))}.bind(null,n)).catch(n.oe)},g=function(){n.e(/*! require.ensure | pages/order/components/product-modal/product-modal */"pages/order/components/product-modal/product-modal").then(function(){return resolve(n(/*! ./components/product-modal/product-modal.vue */377))}.bind(null,n)).catch(n.oe)},m=function(){n.e(/*! require.ensure | pages/order/components/search/search */"pages/order/components/search/search").then(function(){return resolve(n(/*! ./components/search/search.vue */384))}.bind(null,n)).catch(n.oe)},v=function(){n.e(/*! require.ensure | pages/order/components/rest/rest */"pages/order/components/rest/rest").then(function(){return resolve(n(/*! ./components/rest/rest.vue */391))}.bind(null,n)).catch(n.oe)},b=function(){n.e(/*! require.ensure | pages/order/components/pintuan/pintuan */"pages/order/components/pintuan/pintuan").then(function(){return resolve(n(/*! ./components/pintuan/pintuan.vue */398))}.bind(null,n)).catch(n.oe)},S=function(){n.e(/*! require.ensure | pages/order/components/locaAutho/locaAutho */"pages/order/components/locaAutho/locaAutho").then(function(){return resolve(n(/*! ./components/locaAutho/locaAutho.vue */405))}.bind(null,n)).catch(n.oe)},w={components:{actions:f,notice:p,productModal:g,cartBar:_,search:m,rest:v,pintuan:b,locaAutho:S},data:function(){return{menu_list:[],title:"英国城",is_notice:!1,menu_id_current:1,goods_scrollTop:0,good:{},goodModalVisible:!1,cart:[],showSearch:!1,localAdress:{},is_rest:!1,showPintuan:!1,showLocaAutho:!1,shop_change_time:0}},watch:{choosedShop:{handler:function(e){var t=this;return h(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!=t.shop_change_time){n.next=3;break}return t.shop_change_time=1,n.abrupt("return");case 3:return console.log(t.shop_change_time),console.log(6666666666666666e7),console.log(e),n.next=8,t.menu_list_init();case 8:t.$nextTick((function(){return t.calcSize()})),console.log("bbbbbbbbbbbbbbbbbbbbbbbb");case 10:case"end":return n.stop()}}),n)})))()},deep:!0}},onLoad:function(){var t=this;return h(o.default.mark((function n(){var r,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=!0,e.getSetting({success:function(e){console.log(e),void 0!=e.authSetting["scope.userLocation"]&&1!=e.authSetting["scope.userLocation"]?(t.showLocaAutho=!0,r=!1):e.authSetting["scope.userLocation"]}}),r){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,t.long_lati();case 6:return c=n.sent,t.loca_res=c,n.next=10,t.shop_init(t.loca_res);case 10:return t.judge_is_rest(),n.next=13,t.menu_list_init();case 13:console.log("order onLoad"),t.$nextTick((function(){return t.calcSize()}));case 15:case"end":return n.stop()}}),n)})))()},onReady:function(){console.log("order onReady")},onShow:function(){var t=this;e.getSetting({success:function(e){console.log(e),void 0!=e.authSetting["scope.userLocation"]&&1!=e.authSetting["scope.userLocation"]&&(t.showLocaAutho=!0)}}),console.log("order onShow"),this.handle_from(),console.log(this.choosedShop),console.log(this.shopList)},onHide:function(){console.log("order onhide"),console.log(this.choosedShop),console.log(this.shopList)},onShareAppMessage:function(e){},computed:u(u({},(0,r.mapState)(["orderType","pintuanType","choosedShop","choosedAddress","orderFrom","shopList"])),{},{contact_number:function(){if(this.choosedAddress.contact_number)return this.choosedAddress.contact_number.length<=9?this.choosedAddress.contact_number:this.choosedAddress.contact_number.substr(0,8)+"..."},shop_adress:function(){if(this.choosedShop.shop_address)return console.log(111111111111),console.log(this.choosedShop),console.log(this.choosedShop.detail),console.log(this.choosedShop),this.choosedShop.shop_address.length<=9?this.choosedShop.shop_address:this.choosedShop.shop_address.substr(0,8)+"..."},notice_list1:function(){if(this.choosedShop&&(console.log("999999999999999999999999"),console.log(this.choosedShop),this.choosedShop.detail)){console.log("cccccccccccccccccccccccccccc");var e=this.choosedShop.detail.scroll_ad;return console.log(e),e}},productCartNum:function(e){var t=this;return function(e){return t.cart.reduce((function(t,n){return n.id===e?t+n.number:t}),0)}},opening_hours:function(){return this.choosedShop.work_time+" - "+this.choosedShop.rest_time}}),methods:u(u({},(0,r.mapMutations)(["SET_ORDER_TYPE","SET_PINTUAN_TYPE","SET_CHOOSED_SHOP","SET_CHOOSED_ADDRESS","SET_ORDER_FROM","SET_SHOP_LIST"])),{},{calcSize:function(){var t=0;this.menu_list.forEach((function(n){var o=e.createSelectorQuery().select("#goods_".concat(n.id));o.fields({size:!0},(function(e){n.top=t,t+=e.height,n.ht=t})).exec()}))},scan:function(){alert("scan"),e.scanCode({scanType:"qrCode",success:function(t){var n=t.result.split(":");(n.length="invitecode"==n[0].trim().toLowerCase())?e.navigateTo({url:"/pages/pintuan/pintuan?invite=true&code="+n[1]}):e.showModal({showCancel:!1,content:"請掃描正確的邀請碼"})}})},openSetting:function(){var t=this;return h(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.openSetting({success:function(){var n=h(o.default.mark((function n(r){var c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!=r.authSetting["scope.userLocation"]){n.next=13;break}return t.showLocaAutho=!1,n.next=4,t.long_lati();case 4:return c=n.sent,t.judge_is_rest(),n.next=8,t.shop_init(c);case 8:return n.next=10,t.menu_list_init();case 10:t.$nextTick((function(){return t.calcSize()})),n.next=14;break;case 13:e.showToast({title:"授权失败",icon:"none",duration:1e3});case 14:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()});case 1:case"end":return n.stop()}}),n)})))()},judge_is_rest:function(){var t=this;return h(o.default.mark((function n(){var r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.shops_detail)({shop_id:t.choosedShop.id});case 2:r=n.sent.data.work_status,1!=r&&(t.is_rest=!0,e.showModal({content:"本店已休息，您可以選擇切換門店",cancelText:"留在當前",confirmText:"切換門店",success:function(t){t.confirm?e.navigateTo({url:"/pages/chooseShop/chooseShop"}):t.cancel}}));case 4:case"end":return n.stop()}}),n)})))()},handle_from:function(){switch(this.orderFrom){case"home_tssx":var e=this.menu_list.find((function(e){return"特色手信"==e.menu_name}));this.menu_id_current=e.id,this.goods_scrollTop=e.top+Math.random(),this.SET_ORDER_FROM("");break}},pin_tap:function(){var t=this;return h(o.default.mark((function n(){var r,a,i,u,l;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getStorageSync("token"),console.log(r),r){n.next=10;break}return n.next=5,(0,s.default)({confirm:function(){e.navigateTo({url:"/pages/login/login?from=order"})},cancel:function(){}});case 5:if(a=n.sent,console.log(a),0!=a){n.next=9;break}return n.abrupt("return");case 9:console.log("iswliswliswliswl");case 10:if(i=e.getStorageSync("pintuanCode"),!i){n.next=26;break}return n.prev=12,console.log("cccccccccccccc"),n.next=16,(0,c.pintuan_detail)({code:i});case 16:u=n.sent,console.log("aaaaaaaaaaaaaaaaa"),1001==u.code?(console.log("bbbbbbbbbbbbbbbb"),t.showPintuan=!0):e.navigateTo({url:"/pages/pintuan/pintuan?code="+i}),n.next=24;break;case 21:n.prev=21,n.t0=n["catch"](12),console.log(n.t0);case 24:n.next=38;break;case 26:return n.prev=26,n.next=29,(0,c.pintuan_creat)();case 29:l=n.sent,console.log("res_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pcres_pc"),console.log(l),1e3==l.code?(e.setStorage({key:"pintuanCode",data:l.data.code}),e.navigateTo({url:"/pages/pintuan/pintuan?code="+l.data.code})):t.showPintuan=!0,n.next=38;break;case 35:n.prev=35,n.t1=n["catch"](26),console.log(n.t1);case 38:case"end":return n.stop()}}),n,null,[[12,21],[26,35]])})))()},loca_tap:function(){1==this.orderType?e.navigateTo({url:"/pages/userAdress/userAdress"}):e.navigateTo({url:"/pages/chooseShop/chooseShop"})},switch_shop:function(){e.navigateTo({url:"/pages/chooseShop/chooseShop"})},order_type_tap:function(t){1==t?e.navigateTo({url:"/pages/userAdress/userAdress"}):this.SET_ORDER_TYPE(t)},menu_Tap:function(e){this.showLoca=!this.showLoca,this.menu_id_current=e,this.goods_scrollTop=this.menu_list.find((function(t){return t.id==e})).top+Math.random(),console.log(this.goods_scrollTop)},goods_scroll:function(e){var t=e.detail,n=t.scrollTop;n=Math.ceil(n)+1;var o=this.menu_list.filter((function(e){return e.top<=n&&e.ht>n}));o.length>0&&(this.menu_id_current=o[0].id)},showProductDetailModal:function(e){this.good=e,this.goodModalVisible=!0},handleAddToCart:function(e){console.log(this.productCartNum());var t=this.cart.findIndex((function(t){return e.materials&&e.materials.length?t.id==e.id&&t.materials_text==e.materials_text:t.id===e.id}));t>-1?this.cart[t].number+=e.number||1:this.cart.push({id:e.id,name:e.name,price:e.price,truePrice:e.truePrice||e.price,number:e.number||1,imgurl:e.imgurl,norm_id:e.norm_id,materials_text:e.materials_text||"",is_checked:!0})},handleMinusFromCart:function(e){var t;t=e.materials&&!e.materials.length?this.cart.findIndex((function(t){return t.id==e.id})):this.cart.findIndex((function(t){return t.id==e.id&&t.materials_text==e.materials_text})),this.cart[t].number-=1,this.cart[t].number<=0&&this.cart.splice(t,1)},handleAddToCartInModal:function(e){this.handleAddToCart(e),this.closeProductDetailModal()},closeProductDetailModal:function(){this.goodModalVisible=!1,this.good={}},clearCart:function(){this.cart=[]},checkAllChange:function(e){var t=e.detail.value;console.log(e),t.length>0?this.cart.forEach((function(e){return e.is_checked=!0})):this.cart.forEach((function(e){return e.is_checked=!1}))},checkboxChange:function(e){var t=e.detail.value,n=e.currentTarget.dataset.good;console.log(e),console.log(n),t.length>0?this.cart.find((function(e){return e.id==n.id&&e.materials_text==n.materials_text})).is_checked=!0:this.cart.find((function(e){return e.id==n.id&&e.materials_text==n.materials_text})).is_checked=!1},choose_pintuan_type:function(t){var n=this;return h(o.default.mark((function r(){return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:n.showPintuan=!1,1==t?(n.SET_PINTUAN_TYPE(1),e.navigateTo({url:"/pages/pintuan/pintuan"})):(n.SET_PINTUAN_TYPE(2),e.navigateTo({url:"/pages/pintuan/pintuan"}));case 2:case"end":return o.stop()}}),r)})))()},pay:function(t){var n=this;return h(o.default.mark((function r(){var c,a,i,u,l;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(c=e.getStorageSync("token"),console.log(c),c){o.next=8;break}return o.next=5,(0,s.default)({confirm:function(){e.navigateTo({url:"/pages/login/login?from=order"})},cancel:function(){}});case 5:if(a=o.sent,0!=a){o.next=8;break}return o.abrupt("return");case 8:if(n.judge_is_rest(),n.is_rest){o.next=39;break}if(e.showLoading({}),i=getApp(),u={},[],l=[],n.cart.filter((function(e){return 1==e.is_checked})).forEach((function(e){var t={};t.id=e.id,t.goods_name=e.name,t.goods_price=e.truePrice,t.home_avatar=e.imgurl,t.norm=e.materials_text,t.norm_id=e.norm_id?e.norm_id:[],t.goods_num=e.number,l.push(t)})),0!=l.length){o.next=19;break}return e.showModal({content:"您還沒有選購商品",showCancel:!1}),o.abrupt("return");case 19:u.goods_data=l,u.shop_id=n.choosedShop.id,u.shop_name=n.choosedShop.shop_name,u.distance=n.choosedShop.distance,u.delivery_cost=parseInt(100*n.choosedShop.detail.delivery_cost)/100,u.lowest_cost=parseInt(100*n.choosedShop.detail.lowest_cost)/100,u.payment_info=t,u.address_id=n.choosedAddress.id,u.contact_name=n.choosedAddress.contact_name,u.contact_sex=n.choosedAddress.contact_sex,u.contact_phone=n.choosedAddress.contact_phone,u.contact_address=n.choosedAddress.contact_address,u.contact_number=n.choosedAddress.contact_number,u.haul_method=n.orderType,u.current_cups=n.choosedShop.detail.current_cups,u.current_order=n.choosedShop.detail.current_order,i.globalData.goodsPayment=u,console.log(u),e.hideLoading(),e.navigateTo({url:"/pages/orderPayment/orderPayment"});case 39:case"end":return o.stop()}}),r)})))()},long_lati:function(){return h(o.default.mark((function t(){var n,r,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=0,r=0,t.next=4,new Promise((function(t,n){e.getLocation({success:function(e){t(e)},fail:function(e){return h(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}})})).catch((function(e){}));case 4:return c=t.sent,n=c.latitude,r=c.longitude,console.log("latitude:"+n+"longitude:"+r),t.abrupt("return",{latitude:n,longitude:r});case 9:case"end":return t.stop()}}),t)})))()},shop_init:function(e){var t=this;return h(o.default.mark((function n(){var r,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.shops_list)({latitude:e.latitude,longitude:e.longitude});case 2:return r=n.sent.data,r.sort((function(e,t){return parseInt(100*e.distance)<=parseInt(100*t.distance)?-1:1})),s=[],r.forEach(function(){var e=h(o.default.mark((function e(t,n){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.push((0,c.shops_detail)({shop_id:t.id}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),n.next=8,Promise.all(s).then((function(e){var t=0;r.forEach((function(n){n.detail=e[t].data,t++}))}));case 8:console.log(r),t.SET_SHOP_LIST(r),t.SET_CHOOSED_SHOP(t.shopList[0]);case 11:case"end":return n.stop()}}),n)})))()},menu_list_init:function(){var e=this;return h(o.default.mark((function t(){var n,r,s;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.goods_list)({shop_id:e.choosedShop.id});case 2:return n=t.sent.data,console.log(n),r=[],s=[],n.forEach((function(t){var n={};n.id=t.id,n.icon_url=e.imgSrc+t.home_avatar,n.menu_name=t.classify_name,n.goods_list=[],t.child&&t.child.length&&t.child.forEach((function(t){var o={};o.id=t.id,o.name=t.goods_name,o.labels=t.goods_label,o.materials=[],o.description=t.goods_detail,o.imgurl=e.imgSrc+t.home_avatar,o.price=parseInt(100*t.goods_price)/100,o.sell_status=t.sell_status,o.goods_norm=t.goods_norm,n.goods_list.push(o),r.push((0,c.goods_detail)({goods_id:t.id}))})),s.push(n)})),console.log(s),t.next=10,Promise.all(r).then((function(t){console.log(t);var n=0;s.forEach((function(o){o.goods_list.forEach((function(o){var r=[],c=[];t[n].data.goods_avatar.forEach((function(t){r.push(e.imgSrc+t)})),t[n].data.goods_norm.forEach((function(e){var t={};t.group_name=e.name,t.values=[],e.child.forEach((function(e){var n={};n.id=e.id,n.parent_id=e.parent_id,n.name=e.value,n.price=parseInt(100*e.price)/100,t.values.push(n)})),console.log("fffffffffffff"),console.log(t),c.push(t),console.log(c)})),o.images=r,o.materials=c,n++}))})),console.log(s)}));case 10:e.menu_list=s;case 11:case"end":return t.stop()}}),t)})))()},init:function(){var t=this;return h(o.default.mark((function n(){var r,s;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=0,s=0,e.getLocation({type:"gcj02",altitude:!0,success:function(){var e=h(o.default.mark((function e(n){var a,i,u,l;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.latitude,s=n.longitude,e.next=4,(0,c.shops_list)({latitude:r,longitude:s});case 4:return a=e.sent.data,console.log("latitude:"+r+"longitude:"+s),console.log(a),t.SET_SHOP_LIST(a),t.shopList.sort((function(e,t){return parseInt(100*e.distance)<=parseInt(100*t.distance)?-1:1})),console.log(a),t.shopList.forEach(function(){var e=h(o.default.mark((function e(t){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,c.shops_detail)({shop_id:t.id});case 2:n=e.sent.data,console.log(n),t.detail=n;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.SET_CHOOSED_SHOP(t.shopList[0]),console.log(t.choosedShop),e.next=15,(0,c.goods_list)({shop_id:t.choosedShop.id});case 15:return i=e.sent.data,console.log(t.choosedShop),console.log(i),u=[],console.log(t.choosedShop),l=[],i.forEach((function(e){var n={};if(n.id=e.id,n.icon_url=t.imgSrc+e.home_avatar,n.menu_name=e.classify_name,n.goods_list=[],e.child&&e.child.length){var o={};e.child.forEach((function(e){o.id=e.id,o.name=e.goods_name,o.labels=e.goods_label,o.materials=[],o.description=e.goods_detail,o.imgurl=t.imgSrc+e.home_avatar,o.price=e.goods_price,o.sell_status=e.sell_status,o.goods_norm=e.goods_norm,n.goods_list.push(o),u.push((0,c.goods_detail)({goods_id:e.id}))}))}l.push(n)})),console.log(l),e.next=25,Promise.all(u).then((function(e){console.log(e);var n=0;l.forEach((function(o){o.goods_list.forEach((function(o){var r=[],c=[];e[n].data.goods_avatar.forEach((function(e){r.push(t.imgSrc+e)})),console.log(e[n].data.goods_norm),e[n].data.goods_norm.forEach((function(e){var t={};t.group_name=e.name,t.values=[],e.child.forEach((function(e){var n={};n.id=e.id,n.parent_id=e.parent_id,n.name=e.value,n.price=e.price,t.values.push(n)})),console.log("fffffffffffff"),console.log(t),c.push(t),console.log(c)})),o.images=r,o.materials=c}))})),console.log(l)}));case 25:console.log("bojjijijj"),t.menu_list=l;case 27:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()});case 3:case"end":return n.stop()}}),n)})))()}})};t.default=w}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},46:
/*!***********************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& ***!
  \***********************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& */47),r=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=r.a},47:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/yingguocheng/pages/order/order.vue?vue&type=style&index=0&id=127632e4&lang=scss&scoped=true& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[37,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/order/order.js.map